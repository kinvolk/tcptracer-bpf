general:
  branches:
    ignore:
      - gh-pages

machine:
  services:
    - docker
  environment:
    GOPATH: $HOME
    SRCDIR: $HOME/tcptracer-bpf
    PATH: $PATH:$HOME/.local/bin

dependencies:
  override:
    - |
      cd $SRCDIR && make

test:
  override:
    - |
      echo "No tests"

deployment:
  hub:
    branch: /.*/
    commands:
      - |
        cp ebpf/tcptracer-ebpf.o $CIRCLE_ARTIFACTS/
